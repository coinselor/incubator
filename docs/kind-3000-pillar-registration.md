# Kind 3000: Pillar Registration

**Status:** Draft

This document specifies a Nostr event for registering a Pillar's public key to a Nostr public key (`npub`) within the HyperCore One Incubator ecosystem. This creates a verifiable link between a Pillar's on-chain identity and a Nostr public key.

This is a **regular, non-replaceable event**. A full history of registration events is maintained to provide an audit trail. Updates are managed via a sequentially increasing `registration_number`.

This specification incorporates [NIP-73](https://github.com/nostr-protocol/nips/blob/master/73.md) for discoverability of events associated with the Pillar's on-chain address.

## Content Format

The `content` field **MUST** be empty.

### Schema

```json
"content": ""
```

## Event Structure

```json
{
  "id": "<32-bytes lowercase hex-encoded sha256 of the serialized event data>",
  "pubkey": "<32-bytes lowercase hex-encoded public key of the event creator>",
  "created_at": <unix_timestamp>,
  "kind": 3000,
  "tags": [
    ["pillar", "<on-chain pillar moniker>"],
    ["registration_number", "<sequential number as string>"],
    ["signature", "<signature_from_chain_pubkey, 128-character Ed25519 signature in hexadecimal format>"],
    ["i", "<network>[:<chainId, integer>]:address:<pillar_bech32_address>"],
    ["k", "<network>:address"],
    ["alt", "<human-readable event description>"]
  ],
  "content": "",
  "sig": "<64-bytes lowercase hex of the signature of the sha256 hash of the serialized event data, which is the same as the 'id' field>"
}
```

## Tags

| Tag Name | Description | Example Format | Required |
|----------|-------------|----------------|---------|
| `pillar` | Pillar's registered name | `["pillar", "PillarOne"]` | Yes |
| `registration_number` | Version number for updates | `["registration_number", "1"]` | Yes |
| `signature` | Ed25519 signature from pillar's key | `["signature", "ea00f1ab2ad34b60080e77b431d806e9ead4a4eee36e41cf58a05859b080a03a4dc8a8b21b4952dacf5f7f97262ffdcde47132a269ca97c69260543cd0dc8604"]` | Yes |
| `i` | NIP-73 pillar address identifier | `["i", "zenon:1:address:z1qqjnwjjpnue8xmmpanz6csze6tcmtzzdtfsww7"]` | Yes |
| `k` | NIP-73 identifier type | `["k", "zenon:address"]` | Recommended |
| `alt` | Human-readable event description | `["alt", "Registration for PillarOne on HC1 Incubator"]` | Recommended |

### `pillar`
The unique identifier for the Pillar, which is its registered name on the Zenon Network.

Example: `["pillar", "PillarOne"]`

### `registration_number`
A sequential integer (as a string) used for versioning. When multiple registration events exist for the same Pillar, the one with the highest `registration_number` is considered the most recent. Events with a lower number MUST be ignored.

Example: `["registration_number", "1"]`

### `signature`
The signature generated by the private key corresponding to the Pillar's address on Zenon. This proves ownership of the Pillar's key.

Example: `["signature", "ea00f1ab2ad34b60080e77b431d806e9ead4a4eee36e41cf58a05859b080a03a4dc8a8b21b4952dacf5f7f97262ffdcde47132a269ca97c69260543cd0dc8604"]`

### `i` and `k` (NIP-73)

These tags make the event discoverable by NIP-73 compatible clients. The `i` tag contains the Pillar's on-chain address, and the `k` tag specifies the type of identifier. The chainId component in the `i` tag is optional.

- `i`: `["i", "zenon:1:address:<pillar_bech32_address>"]`
- `k`: `["k", "zenon:address"]`

Example: `["i", "zenon:1:address:z1qqjnwjjpnue8xmmpanz6csze6tcmtzzdtfsww7"]`, `["k", "zenon:address"]`

### `alt`
A human-readable summary of the event's purpose, as per [NIP-31](https://github.com/nostr-protocol/nips/blob/master/31.md). The `content` field **MUST** be empty.

Example: `["alt", "Registration for PillarOne on HC1 Incubator"]`

## Client Behavior

Clients SHOULD verify the authenticity of Pillar Registration events before trusting them. To verify a registration, clients MUST perform the following steps:

1.  Construct the precise message string that was signed. The format is:
    `"pillar-registration:" + <nostr_pubkey_in_hex>`
    
    Example: `"pillar-registration:6e468422dfb74a5738702a8823b9b28168abab8655faacb6853cd0ee15deee93"`

2.  Extract the Pillar's address from the `i` tag and derive the corresponding public key.

3.  Verify the `signature` against the constructed message using Zenon's standard signature scheme (Ed25519).

Clients SHOULD only consider registration events with the highest `registration_number` for each Pillar as valid.

## Relay Behavior

Relays SHOULD treat Kind 3000 events as regular events and are not required to perform any special validation beyond standard Nostr event validation. Relays MAY choose to implement additional filtering or validation policies at their discretion.

## Example Event

```json
{
  "id": "4376c65d2f232afbe9b882a35baa4f6fe8667c4e684749af565f981833ed6a65",
  "pubkey": "6e468422dfb74a5738702a8823b9b28168abab8655faacb6853cd0ee15deee93",
  "created_at": 1671217411,
  "kind": 3000,
  "tags": [
    ["pillar", "PillarOne"],
    ["registration_number", "1"],
    ["signature", "ea00f1ab2ad34b60080e77b431d806e9ead4a4eee36e41cf58a05859b080a03a4dc8a8b21b4952dacf5f7f97262ffdcde47132a269ca97c69260543cd0dc8604"],
    ["i", "zenon:1:address:z1qqjnwjjpnue8xmmpanz6csze6tcmtzzdtfsww7"],
    ["k", "zenon:address"],
    ["alt", "Registration for PillarOne on HC1 Incubator"]
  ],
  "content": "",
  "sig": "908a15e46fb4d8675bab026fc230a0e3542bfade63da02d542fb78b2a8513fcd0092619a2c8c1221e581946e0191f2af505dfdf8657a414dbca329186f009262"
}
```
